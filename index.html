<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Wooden Bat Classic database viewer - View team standings, player rosters, and game schedules for the WBC tournament.">
    <title>WBC Database Viewer</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        body {
            font-family: 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 20px;
            background: #2d5a27;
            background-attachment: fixed;
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                /* Base grass color */
                linear-gradient(180deg, #2d5a27 0%, #245a20 50%, #2d5a27 100%),

                /* Grass blade patterns */
                repeating-linear-gradient(
                    45deg,
                    transparent 0px,
                    rgba(34, 139, 34, 0.15) 1px,
                    rgba(34, 139, 34, 0.15) 2px,
                    transparent 3px,
                    transparent 8px,
                    rgba(50, 205, 50, 0.1) 9px,
                    rgba(50, 205, 50, 0.1) 10px,
                    transparent 11px
                ),

                /* Additional texture layers */
                repeating-linear-gradient(
                    -45deg,
                    transparent 0px,
                    rgba(25, 100, 25, 0.08) 1px,
                    rgba(25, 100, 25, 0.08) 2px,
                    transparent 3px,
                    transparent 12px,
                    rgba(34, 139, 34, 0.12) 13px,
                    rgba(34, 139, 34, 0.12) 14px,
                    transparent 15px
                ),

                /* Fine grass details */
                repeating-linear-gradient(
                    90deg,
                    transparent 0px,
                    rgba(46, 139, 87, 0.06) 1px,
                    transparent 2px,
                    transparent 6px,
                    rgba(60, 179, 113, 0.04) 7px,
                    transparent 8px
                ),

                /* Random grass clumps */
                radial-gradient(circle at 20% 30%, rgba(34, 139, 34, 0.2) 0%, transparent 15%),
                radial-gradient(circle at 70% 60%, rgba(50, 205, 50, 0.15) 0%, transparent 12%),
                radial-gradient(circle at 40% 80%, rgba(25, 100, 25, 0.18) 0%, transparent 18%),
                radial-gradient(circle at 85% 25%, rgba(46, 139, 87, 0.12) 0%, transparent 10%);
            background-size: 100% 100%, 20px 20px, 25px 25px, 15px 15px, 100% 100%;
            background-repeat: no-repeat, repeat, repeat, repeat, no-repeat;
            pointer-events: none;
            z-index: -1;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            background: linear-gradient(145deg, #b87333 0%, #a0662a 50%, #b87333 100%);
            background-image:
                radial-gradient(circle at 30% 30%, rgba(184, 115, 51, 0.9) 0%, transparent 40%),
                radial-gradient(circle at 70% 70%, rgba(160, 102, 42, 0.8) 0%, transparent 40%),
                linear-gradient(145deg, #b87333 0%, #a0662a 100%);
            padding: 30px;
            border-radius: 16px;
            box-shadow:
                0 20px 40px rgba(0,0,0,0.3),
                0 8px 16px rgba(0,0,0,0.2),
                inset 0 1px 0 rgba(255,255,255,0.1);
            border: 3px solid #ffffff;
            position: relative;
        }

        .dashboard-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            border-radius: 18px;
            pointer-events: none;
        }
        h1 {
            text-align: center;
            color: #dc2626;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        /* Tab Navigation Styles */
        .tab-navigation {
            display: flex;
            gap: 8px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 30px;
            overflow-x: auto;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .tab-button {
            padding: 14px 28px;
            background: rgba(255, 255, 255, 0.4);
            border: 2px solid rgba(30, 58, 138, 0.2);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #1e3a8a;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            border-radius: 8px;
            position: relative;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-button:hover {
            background: rgba(255,255,255,0.8);
            color: #000000;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .tab-button.active {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            color: #000000;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .tab-button:focus {
            outline: 3px solid #2563eb;
            outline-offset: 2px;
        }

        .tab-icon {
            font-size: 18px;
            line-height: 1;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .data-panel {
            margin-bottom: 30px;
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.08), 0 4px 8px rgba(0,0,0,0.04);
            border: 1px solid rgba(255,255,255,0.8);
        }
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 15px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        }
        th, td {
            padding: 16px 20px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        th {
            background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
            color: white;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            border: none;
        }
        th:first-child {
            border-top-left-radius: 8px;
        }
        th:last-child {
            border-top-right-radius: 8px;
        }
        tr:last-child td {
            border-bottom: none;
        }
        tr:nth-child(even) {
            background: linear-gradient(90deg, #f8fafc 0%, #ffffff 100%);
        }
        tr:hover {
            background: linear-gradient(90deg, #f0f4ff 0%, #e6f0ff 100%);
            transform: scale(1.01);
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.1);
        }
        .error-message {
            text-align: center;
            padding: 20px;
            color: #d32f2f;
            font-weight: bold;
            background-color: #ffebee;
            border-radius: 4px;
            margin: 20px 0;
        }
        .loading-message {
            text-align: center;
            padding: 20px;
            color: #2563eb;
            font-style: italic;
            font-weight: 500;
        }
        .no-data {
            text-align: center;
            padding: 15px;
            color: #666;
            font-style: italic;
            background-color: #f5f5f5;
        }

        /* Calendar View Styles */
        .schedule-container {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .day-section {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
            border: 1px solid rgba(255,255,255,0.8);
        }

        .day-header {
            font-size: 20px;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 3px solid #ffffff;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .day-header .calendar-icon {
            font-size: 24px;
            aria-hidden: "true";
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }

        .game-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(0,0,0,0.06), 0 1px 3px rgba(0,0,0,0.04);
            border: 2px solid rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #059669 0%, #0d9488 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .game-card:hover {
            box-shadow: 0 8px 24px rgba(5, 150, 105, 0.12), 0 4px 8px rgba(5, 150, 105, 0.08);
            transform: translateY(-4px) scale(1.02);
            border-color: rgba(5, 150, 105, 0.2);
        }

        .game-card:hover::before {
            opacity: 1;
        }

        /* Time-of-Day Color Coding for Game Cards - Specific Time Slots */
        .game-930am {
            background: linear-gradient(145deg, #fef7cd 0%, #fde68a 100%); /* Yellow - 9:30 AM */
        }

        .game-1200pm {
            background: linear-gradient(145deg, #e0f2fe 0%, #bae6fd 100%); /* Blue - 12:00 PM */
        }

        .game-130pm {
            background: linear-gradient(145deg, #e0f2fe 0%, #bae6fd 100%); /* Blue - 1:30 PM */
        }

        .game-230pm {
            background: linear-gradient(145deg, #fff7ed 0%, #fed7aa 100%); /* Orange - 2:30 PM */
        }

        .game-400pm {
            background: linear-gradient(145deg, #fff7ed 0%, #fed7aa 100%); /* Orange - 4:00 PM */
        }

        .game-500pm {
            background: linear-gradient(145deg, #faf5ff 0%, #f3e8ff 100%); /* Purple - 5:00 PM */
        }

        .game-630pm {
            background: linear-gradient(145deg, #faf5ff 0%, #f3e8ff 100%); /* Purple - 6:30 PM */
        }

        .game-time {
            font-size: 16px;
            font-weight: 600;
            color: #2563eb;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .game-time::before {
            content: "üïí";
            font-size: 18px;
        }

        .game-matchup {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #000000;
            line-height: 1.4;
        }

        .game-location {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .game-location::before {
            content: "üìç";
            font-size: 16px;
        }

        .game-score {
            font-size: 14px;
            font-weight: 600;
            color: #000000;
            background: transparent;
            border: 1px solid rgba(0,0,0,0.15);
            padding: 8px 12px;
            border-radius: 6px;
            display: inline-block;
            margin-top: 8px;
        }

        @media (max-width: 768px) {
            .games-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Player Cards Grid Styles */
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
            margin-top: 20px;
        }

        .player-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 12px;
            padding: 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
            border: 1px solid rgba(255,255,255,0.8);
            position: relative;
            overflow: hidden;
        }

        .player-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #2563eb 0%, #7c3aed 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .player-card:hover {
            box-shadow: 0 12px 32px rgba(37, 99, 235, 0.15), 0 8px 16px rgba(37, 99, 235, 0.1);
            transform: translateY(-6px) scale(1.02);
            border-color: rgba(37, 99, 235, 0.2);
        }

        .player-card:hover::before {
            opacity: 1;
        }

        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .player-name {
            font-size: 18px;
            font-weight: 700;
            color: #000000;
        }

        .player-team {
            background-color: #2563eb;
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(37, 99, 235, 0.2);
        }

        .player-details {
            margin-bottom: 12px;
        }

        .player-detail-row {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            color: #64748b;
            font-size: 14px;
            font-weight: 600;
        }

        .player-detail-row::before {
            content: "‚Ä¢";
            color: #2563eb;
            margin-right: 8px;
            font-weight: bold;
        }

        .player-tournaments {
            background: linear-gradient(135deg, #f0f4ff 0%, #e6f0ff 100%);
            color: #2563eb;
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            display: inline-block;
            margin-top: 10px;
            border: 1px solid #cbd5e1;
        }

        .player-tournaments::before {
            content: "üèÜ ";
        }

        /* Rookie players get baseball emoji */
        .rookie::before {
            content: "‚öæ ";
        }

        /* Age Group Color Coding with Gentle Gradients */
        .age-group-30-39 {
            background: linear-gradient(145deg, #f0f9f0 0%, #e8f5e9 100%);
            border-color: #c8e6c9;
        }
        .age-group-30-39 .player-name,
        .age-group-30-39 .player-detail-row,
        .age-group-30-39 .player-tournaments {
            color: #000000;
        }
        .age-group-30-39 .player-team {
            background-color: #2e7d32;
        }

        .age-group-40-49 {
            background: linear-gradient(145deg, #e3f2fd 0%, #bbdefb 100%);
            border-color: #90caf9;
        }
        .age-group-40-49 .player-name,
        .age-group-40-49 .player-detail-row,
        .age-group-40-49 .player-tournaments {
            color: #000000;
        }
        .age-group-40-49 .player-team {
            background-color: #1565c0;
        }

        .age-group-50-59 {
            background: linear-gradient(145deg, #fef2f2 0%, #fee2e2 100%);
            border-color: #fca5a5;
        }
        .age-group-50-59 .player-name,
        .age-group-50-59 .player-detail-row,
        .age-group-50-59 .player-tournaments {
            color: #000000;
        }
        .age-group-50-59 .player-team {
            background-color: #dc2626;
        }

        .age-group-60-67 {
            background: linear-gradient(145deg, #fff3e0 0%, #ffe0b2 100%);
            border-color: #ffcc02;
        }
        .age-group-60-67 .player-name,
        .age-group-60-67 .player-detail-row,
        .age-group-60-67 .player-tournaments {
            color: #000000;
        }
        .age-group-60-67 .player-team {
            background-color: #e65100;
        }

        .age-group-68-plus {
            background: linear-gradient(145deg, #efebe9 0%, #d7ccc8 100%);
            border-color: #bcaaa4;
        }
        .age-group-68-plus .player-name,
        .age-group-68-plus .player-detail-row,
        .age-group-68-plus .player-tournaments {
            color: #000000;
        }
        .age-group-68-plus .player-team {
            background-color: #3e2723;
        }

        /* Age group badge - positioned in bottom right */
        .age-group-badge {
            position: absolute;
            bottom: 10px;
            right: 10px;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            z-index: 1;
        }

        /* Age group badges with matching team colors */
        .age-group-30-39 .age-group-badge {
            background-color: #2e7d32;
        }
        .age-group-40-49 .age-group-badge {
            background-color: #1565c0;
        }
        .age-group-50-59 .age-group-badge {
            background-color: #dc2626;
        }
        .age-group-60-67 .age-group-badge {
            background-color: #e65100;
        }
        .age-group-68-plus .age-group-badge {
            background-color: #3e2723;
        }

        /* Team Filter Styles */
        .team-filter-container {
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
            border: 1px solid rgba(255,255,255,0.8);
        }

        .team-filter-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2563eb;
            font-size: 16px;
        }

        .team-filter-select {
            width: 100%;
            max-width: 400px;
            padding: 12px 16px;
            font-size: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            color: #1f2937;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .team-filter-select:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1), 0 4px 12px rgba(37, 99, 235, 0.15);
            transform: translateY(-1px);
        }

        .team-filter-select:hover {
            border-color: #2563eb;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.1);
        }

        /* Skip link styles */
        .skip-link {
            position: absolute;
            left: -10000px;
            width: 1px;
            height: 1px;
            overflow: hidden;
            background-color: #4CAF50;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            z-index: 1000;
            border-radius: 4px;
        }

        .skip-link:focus {
            position: static;
            width: auto;
            height: auto;
            overflow: visible;
        }

        /* Focus styles for better keyboard navigation */
        .tab-button:focus {
            outline: 3px solid #2563eb;
            outline-offset: 2px;
        }

        .player-card:focus {
            outline: 3px solid #2563eb;
            outline-offset: 2px;
        }

        .game-card:focus {
            outline: 3px solid #2563eb;
            outline-offset: 2px;
        }

        @media (max-width: 768px) {
            .games-grid {
                grid-template-columns: 1fr;
            }
        }
        /* Rules Cards Styles */
        .rules-intro {
            text-align: center;
            color: #64748b;
            font-size: 16px;
            margin-bottom: 30px;
            font-style: italic;
        }

        .rules-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .rules-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
            border: 2px solid rgba(255,255,255,0.8);
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .rules-card:hover {
            box-shadow: 0 8px 24px rgba(0,0,0,0.12), 0 4px 8px rgba(0,0,0,0.08);
            transform: translateY(-2px);
            border-color: rgba(37, 99, 235, 0.2);
        }

        .rules-card.expanded {
            box-shadow: 0 12px 32px rgba(37, 99, 235, 0.15), 0 8px 16px rgba(37, 99, 235, 0.1);
            border-color: rgba(37, 99, 235, 0.3);
        }

        .rules-card-header {
            padding: 20px;
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .rules-card h3 {
            margin: 0;
            color: #1e293b;
            font-size: 18px;
            font-weight: 700;
            line-height: 1.3;
        }

        .rules-card-summary {
            color: #64748b;
            font-size: 14px;
            line-height: 1.4;
            margin: 0;
        }

        .rules-card-toggle {
            align-self: flex-end;
            margin-top: 8px;
        }

        .expand-icon {
            font-size: 16px;
            color: #64748b;
            transition: transform 0.3s ease, color 0.3s ease;
            display: inline-block;
        }

        .rules-card.expanded .expand-icon {
            transform: rotate(180deg);
            color: #2563eb;
        }

        .rules-card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: #ffffff;
        }

        .rules-card.expanded .rules-card-content {
            max-height: 2000px; /* Large enough for content */
        }

        .rules-card-content ol {
            margin: 20px;
            padding-left: 20px;
        }

        .rules-card-content li {
            margin-bottom: 12px;
            line-height: 1.5;
            color: #374151;
        }

        .rules-card-content p {
            margin: 20px;
            line-height: 1.6;
            color: #374151;
        }

        .rules-card-content h4 {
            margin: 20px 20px 10px 20px;
            color: #1e293b;
            font-size: 16px;
            font-weight: 600;
        }

        /* Mobile responsive for rules cards */
        @media (max-width: 768px) {
            .rules-cards-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .rules-card-header {
                padding: 16px;
            }

            .rules-card h3 {
                font-size: 16px;
            }

            .rules-card-summary {
                font-size: 13px;
            }

            .rules-card-content ol,
            .rules-card-content p,
            .rules-card-content h4 {
                margin: 16px;
            }

            .rules-card-content ol {
                padding-left: 16px;
            }
        }

        @media (max-width: 768px) {
            .dashboard-container {
                padding: 10px;
            }
            .players-grid {
                grid-template-columns: 1fr;
            }
            .tab-button {
                padding: 10px 16px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <main id="main-content">
        <div class="dashboard-container">
            <h1><img src="Logo - Full Transparency.png" alt="Wooden Bat Classic Logo" width="75%"></h1>

            <!-- Team Filter -->
            <div class="team-filter-container">
                <label class="team-filter-label">Filter by Team:</label>
                <select id="team-filter" class="team-filter-select">
                    <option value="all">All Teams</option>
                    <!-- Team options will be populated dynamically -->
                </select>
            </div>

            <div id="error-container" class="error-message" style="display: none;">
                Failed to connect to the database. Please check your connection and try again.
            </div>

            <div id="loading-container" class="loading-message">
                Loading data from database...
            </div>

            <div id="data-container" style="display: none;">
                <!-- Tab Navigation -->
                <div class="tab-navigation" role="tablist">
                    <button class="tab-button active" role="tab" aria-selected="true" aria-controls="teams-tab" id="teams-tab-btn" data-tab="teams"><span class="tab-icon">üìä</span> Standings</button>
                    <button class="tab-button" role="tab" aria-selected="false" aria-controls="players-tab" id="players-tab-btn" data-tab="players"><span class="tab-icon">üë•</span> Roster</button>
                    <button class="tab-button" role="tab" aria-selected="false" aria-controls="schedule-tab" id="schedule-tab-btn" data-tab="schedule"><span class="tab-icon">üìÖ</span> Schedule</button>
                    <button class="tab-button" role="tab" aria-selected="false" aria-controls="rules-tab" id="rules-tab-btn" data-tab="rules"><span class="tab-icon">üìã</span> Rules</button>
                </div>

                <!-- Teams Tab Content -->
                <div id="teams-tab" class="tab-content active" role="tabpanel" aria-labelledby="teams-tab-btn">
                    <section class="data-panel">
                        <table id="teams-table">
                            <thead>
                                <tr>
                                    <th>Team</th>
                                    <th>W-L</th>
                                    <th>RA</th>
                                </tr>
                            </thead>
                            <tbody id="teams-data">
                                <!-- Teams data will be populated here -->
                            </tbody>
                        </table>
                    </section>
                </div>

                <!-- Players Tab Content -->
                <div id="players-tab" class="tab-content" role="tabpanel" aria-labelledby="players-tab-btn">
                    <div id="players-grid" class="players-grid">
                        <!-- Player cards will be populated here -->
                    </div>
                </div>

                <!-- Schedule Tab Content -->
                <div id="schedule-tab" class="tab-content" role="tabpanel" aria-labelledby="schedule-tab-btn">
                    <div id="schedule-container" class="schedule-container">
                        <!-- Schedule content will be populated here -->
                    </div>
                </div>

                <!-- Rules Tab Content -->
                <div id="rules-tab" class="tab-content" role="tabpanel" aria-labelledby="rules-tab-btn">
                    <section class="data-panel">
                        <h1>Rules of the Game</h1>
                        <p class="rules-intro">Click on any section below to expand and view the complete rules.</p>

                        <div class="rules-cards-grid">
                            <!-- Team Roster Requirements Card -->
                            <div class="rules-card" data-section="roster">
                                <div class="rules-card-header">
                                    <h3>Team Roster Requirements</h3>
                                    <div class="rules-card-summary">Age restrictions, professional player limits, and team composition rules</div>
                                    <div class="rules-card-toggle">
                                        <span class="expand-icon">‚ñº</span>
                                    </div>
                                </div>
                                <div class="rules-card-content">
                                    <ol>
                                        <li>Age requirements are defined by "birth year", not birth date. For example: a player born on any date in 1996 is considered a 30-year old in January 2026.</li>
                                        <li>Players under 30 years old are not allowed to play. Players eligible to play in 2026 must have been born during or before the year 1996.</li>
                                        <li>A maximum of two former professional baseball players are allowed on a team's roster. This includes MLB, MiLB, and professional independent league players.</li>
                                        <li>Each team must have a <strong>minimum</strong> of <strong>one</strong> player who is at least 68 years old.</li>
                                        <li>Each team must have a <strong>minimum</strong> of <strong>three</strong> players who are at least 60 years old.</li>
                                        <li>Each team must have a <strong>minimum</strong> of <strong>three</strong> players who are at least 50 years old.</li>
                                        <li>Each team is allowed a <strong>maximum</strong> of <strong>three</strong> players who are under 40 years old, but it is not a requirement to carry any players who are under 40 years old.</li>
                                        <li>Players under 40 years of age <strong>are not</strong> allowed to pitch.</li>
                                        <li>To complete a team's roster, players of any age can be carried as long as the seven age requirements in items 1, 2, and 3 above have been met.</li>
                                    </ol>
                                </div>
                            </div>

                            <!-- The Game Card -->
                            <div class="rules-card" data-section="game">
                                <div class="rules-card-header">
                                    <h3>Basics</h3>
                                    <div class="rules-card-summary">Game length, extra innings, mercy rule, and basic modifications to baseball rules</div>
                                    <div class="rules-card-toggle">
                                        <span class="expand-icon">‚ñº</span>
                                    </div>
                                </div>
                                <div class="rules-card-content">
                                    <p>The basic rules of baseball apply. Modifications to the rules are used in an effort to promote parity on the playing field and consider the wide range of player's ages.</p>
                                    <h4>Game Length</h4>
                                    <ol>
                                        <li>The length of a game is 7 innings.</li>
                                        <li>The game is official after five innings where weather or darkness becomes a factor.</li>
                                        <li>If the score is tied after regulation, the MLB extra-innings rule will be implemented.<br>
                                            <strong>a.</strong> The last batter (not necessarily the last out) from the previous inning is placed on 2nd base with no outs.<br>
                                            The next batter in the order leads off the inning.<br>
                                            The MLB extra-innings rule is used until a winner is determined.<br>
                                            Games will not end in a tie.</li>
                                        <li><strong>Mercy Rule:</strong> An inning is over when the team batting scores six runs before the 3rd out is made.<br>
                                            <strong>Note:</strong> The mercy rule is "per inning".<br>
                                            There is no mercy rule that shortens the game.<br>
                                            <strong>Exceptions:</strong><br>
                                            1. If a batter hits a home run (a ball hit over the wall or fence), his run and any runners on base score even if it results in more than six runs scoring in the inning.<br>
                                            2. There is no limit to the number of runs either team can score in the 7th inning of play or in extra innings.</li>
                                    </ol>
                                </div>
                            </div>

                            <!-- Baserunning Rules Card -->
                            <div class="rules-card" data-section="baserunning">
                                <div class="rules-card-header">
                                    <h3>Baserunning</h3>
                                    <div class="rules-card-summary">Substitute runners, lead-off restrictions, and base advancement rules</div>
                                    <div class="rules-card-toggle">
                                        <span class="expand-icon">‚ñº</span>
                                    </div>
                                </div>
                                <div class="rules-card-content">
                                    <ol>
                                        <li>Prior to the start of a game, managers must announce to the opposing team if any known substitute baserunners will be needed.<br>
                                            <strong>a.</strong> After reaching base safely, the batter may request a substitute baserunner due to an injury.</li>
                                        <li>The last batted out or base running out or runner scored of the inning is eligible to become a substitute base runner for those who are injured, have physical limitations or are over 60 years of age.</li>
                                        <li>Any player 60 years of age or older, who has safely reached base, may request a substitute baserunner.<br>
                                            This request is voluntary and does not come from the bench.</li>
                                        <li>A batter with physical limitations, who gets a "base hit" to the outfield (umpire's judgement), cannot be thrown out at first base by an outfielder, nor can an outfielder relay the ball to an infielder to throw the batter out at first.</li>
                                        <li>A substitute baserunner is not allowed for the batter from home plate, since the batter cannot be thrown out at first base on a base hit.</li>
                                        <li>The "speed up" rule for catchers will not be used at any time.</li>
                                        <li>A batter may not advance to first base on a dropped third strike.</li>
                                        <li>The stealing of a base, advancing on a wild pitch or on a passed ball is not allowed.</li>
                                        <li>If the catcher makes an errant throw back to the pitcher, the base runners may not advance.</li>
                                        <li>The catcher cannot attempt to "pick off" base runners.</li>
                                        <li>Lead-offs are limited to 12 feet and are usually marked with a chalk line on the field.<br>
                                            <strong>a.</strong> A base runner exceeding the length of the lead-off beyond the allowed limit is subject to being called out.</li>
                                        <li>Base runners are allowed a walking or stationary lead-off.<br>
                                            Running leads are not allowed.</li>
                                        <li>A base runner may begin advancing to the next base only after the pitched ball crosses home plate.<br>
                                            <strong>a.</strong> With two outs, a three and two count and force out situations on the base paths, base runners may begin to advance upon the ball leaving the pitcher's hand.</li>
                                    </ol>
                                </div>
                            </div>

                            <!-- Pitching Rules Card -->
                            <div class="rules-card" data-section="pitching">
                                <div class="rules-card-header">
                                    <h3>Pitching</h3>
                                    <div class="rules-card-summary">Pitching positions, hit batter penalties, and professional player restrictions</div>
                                    <div class="rules-card-toggle">
                                        <span class="expand-icon">‚ñº</span>
                                    </div>
                                </div>
                                <div class="rules-card-content">
                                    <ol>
                                        <li>A pitcher may pitch from either the stretch or wind-up position at anytime.</li>
                                        <li>The pitcher cannot attempt to "pick off" base runners.</li>
                                        <li>If a pitcher hits two batters in the same inning, he is removed from the mound but can pitch the following inning or in any inning thereafter.</li>
                                        <li>If a pitcher hits three batters during a game, he is permanently removed from the mound for the game but can play other defensive positions.</li>
                                        <li>Former professional baseball players under the WBC age of 53 are not allowed to pitch in Wooden Bat Classic games.<br>
                                            This includes MLB, MiLB, and professional independent league players.</li>
                                    </ol>
                                </div>
                            </div>

                            <!-- Bunting Card -->
                            <div class="rules-card" data-section="bunting">
                                <div class="rules-card-header">
                                    <h3>Bunting</h3>
                                    <div class="rules-card-summary">Bunt attempt restrictions and general bunt rules</div>
                                    <div class="rules-card-toggle">
                                        <span class="expand-icon">‚ñº</span>
                                    </div>
                                </div>
                                <div class="rules-card-content">
                                    <ol>
                                        <li>A batter cannot "show bunt" on a pitch and then swing at the same pitch.<br>
                                            Doing so results in the batter being called out.</li>
                                        <li>Bunting is allowed at any time.</li>
                                    </ol>
                                </div>
                            </div>

                            <!-- Batting Order Card -->
                            <div class="rules-card" data-section="batting">
                                <div class="rules-card-header">
                                    <h3>Batting Order</h3>
                                    <div class="rules-card-summary">Lineup requirements, changes, rubber banding, and line-share batting</div>
                                    <div class="rules-card-toggle">
                                        <span class="expand-icon">‚ñº</span>
                                    </div>
                                </div>
                                <div class="rules-card-content">
                                    <ol>
                                        <li>The batting order must contain all eligible roster players.</li>
                                        <li>A team's batting order can be changed after the first game.<br>
                                            This allows the manager a chance to evaluate his players and establish a lineup to use for the rest of the tournament.<br>
                                            <strong>a.</strong> Once the batting order for the team's second game has been established, no changes are allowed.</li>
                                        <li>The batting order for each team is "rubber banded" throughout the tournament, including the playoffs.<br>
                                            The term "rubber banded" means the batter, who was on deck as a game ends, is the leadoff batter for the next game.<br>
                                            This allows players to have the same number of plate appearances or within one plate appearance of their teammates by the end of the tournament.</li>
                                        <li>Line-share Batting can be used by teams with 14 or more players but these teams must have at least 13 positions in their batting order.<br>
                                            Two players may share the same position in the batting order (essentially becoming a "single" player).<br>
                                            Either player may bat in that position and alternating at bats is not required.<br>
                                            If Line-sharing is used, it must be established by Game 2, is part of the rubber band lineup, and continues through the end of the tournament.</li>
                                        <li>Teams using Line-share batting positions must notify the opposing team prior to the game.</li>
                                    </ol>
                                </div>
                            </div>

                            <!-- Miscellaneous Card -->
                            <div class="rules-card" data-section="misc">
                                <div class="rules-card-header">
                                    <h3>Miscellaneous</h3>
                                    <div class="rules-card-summary">Hidden ball tricks, contact rules, and other general regulations</div>
                                    <div class="rules-card-toggle">
                                        <span class="expand-icon">‚ñº</span>
                                    </div>
                                </div>
                                <div class="rules-card-content">
                                    <ol>
                                        <li>Hidden ball tricks are not allowed.</li>
                                        <li>Faking or "deaking" by a defensive player to make a baserunner alter his course or slide unnecessarily is not allowed.<br>
                                            If in the umpire's judgment this occurs, the baserunner and all other current baserunners are awarded an extra base.</li>
                                        <li>Beyond applying the tag to a baserunner, a "no-contact" rule between the offensive and defensive players is in effect.</li>
                                        <li>Oversliding the base or "taking out" a defensive player is not allowed.<br>
                                            If the baserunner violates the "no-contact" rule, the umpire may eject the baserunner from the game.</li>
                                        <li>If the catcher is blocking the plate and does not have control of the ball, the baserunner may go around the catcher and not touch home plate yet still be awarded the run if it was to avoid a collision.</li>
                                    </ol>
                                </div>
                            </div>

                            <!-- Playoffs Card -->
                            <div class="rules-card" data-section="playoffs">
                                <div class="rules-card-header">
                                    <h3>Playoffs</h3>
                                    <div class="rules-card-summary">Seeding criteria, bracket creation, and playoff format rules</div>
                                    <div class="rules-card-toggle">
                                        <span class="expand-icon">‚ñº</span>
                                    </div>
                                </div>
                                <div class="rules-card-content">
                                    <ol>
                                        <li>Upon completion of the scheduled games, seedings and multiple playoff brackets will be created based on win-loss records and other criteria.</li>
                                        <li>Seedings in playoff brackets where teams have the same win-loss record is determined by the following:<br>
                                            <strong>First criteria:</strong> Head to head results (if applicable). If still tied.....<br>
                                            <strong>Second criteria:</strong> Runs allowed. If still tied.....<br>
                                            <strong>Third criteria:</strong> A coin flip.</li>
                                        <li>The higher seeded team for each playoff game is the designated home team.</li>
                                        <li>Playoffs are single elimination format.</li>
                                    </ol>
                                </div>
                            </div>

                            <!-- Bob Wagner Rule Card -->
                            <div class="rules-card" data-section="bob-wagner">
                                <div class="rules-card-header">
                                    <h3>The Bob Wagner Rule</h3>
                                    <div class="rules-card-summary">The fundamental philosophy of Wooden Bat Classic</div>
                                    <div class="rules-card-toggle">
                                        <span class="expand-icon">‚ñº</span>
                                    </div>
                                </div>
                                <div class="rules-card-content">
                                    <p>It is perfectly legitimate for the game to make a fool of a player, but it is not legitimate for a player to make a fool of the game.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Browser-compatible Supabase API -->
    <script src="browser-supabase-api.js"></script>

    <script>
        // Initialize browser-compatible Supabase API
        const supabaseManager = new BrowserSupabaseManager();

        // Load data from Supabase
        async function loadDatabaseData() {
            try {
                // Show loading message
                document.getElementById('loading-container').style.display = 'block';
                document.getElementById('error-container').style.display = 'none';
                document.getElementById('data-container').style.display = 'none';

                // Fetch all data from the three tables
                const [teams, players, games] = await Promise.all([
                    supabaseManager.getTeams(),
                    supabaseManager.getAllPlayers(),
                    supabaseManager.getGames()
                ]);

                // Hide loading message and show data
                document.getElementById('loading-container').style.display = 'none';
                document.getElementById('data-container').style.display = 'block';

                // Display the data
                displayTeams(teams);
                displayPlayers(players);
                displaySchedule(games);

                // Initialize tab functionality
                setupTabs();

            } catch (error) {
                console.error('Error loading database data:', error);

                // Hide loading and show error message only
                document.getElementById('loading-container').style.display = 'none';
                document.getElementById('error-container').style.display = 'block';
                document.getElementById('data-container').style.display = 'none';
            }
        }

        // Setup tab functionality
        function setupTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class and aria-selected from all buttons and contents
                    tabButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-selected', 'false');
                    });
                    tabContents.forEach(content => content.classList.remove('active'));

                    // Add active class and aria-selected to clicked button and corresponding content
                    button.classList.add('active');
                    button.setAttribute('aria-selected', 'true');
                    const tabId = button.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');

                    // Initialize rules cards when rules tab becomes active
                    if (tabId === 'rules') {
                        setupRulesCards();
                    }
                });
            });
        }

        // Setup expandable rules cards functionality
        function setupRulesCards() {
            const rulesCards = document.querySelectorAll('.rules-card');

            rulesCards.forEach(card => {
                // Prevent multiple event listeners
                if (card.hasEventListener) return;
                card.hasEventListener = true;

                card.addEventListener('click', (e) => {
                    // Don't toggle if clicking on links or other interactive elements
                    if (e.target.tagName === 'A' || e.target.closest('a')) return;

                    // Toggle expanded class
                    card.classList.toggle('expanded');

                    // Update aria-expanded attribute for accessibility
                    const isExpanded = card.classList.contains('expanded');
                    card.setAttribute('aria-expanded', isExpanded);
                });

                // Set initial aria-expanded state
                card.setAttribute('aria-expanded', 'false');
            });
        }

        // Display teams data with ranking
        function displayTeams(teams) {
            const tableBody = document.getElementById('teams-data');
            tableBody.innerHTML = '';

            if (teams.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="3" class="no-data">No teams found in the database.</td>';
                tableBody.appendChild(row);
                return;
            }

            // Calculate win rate and sort teams
            const teamsWithRank = teams.map(team => ({
                ...team,
                winRate: (team.wins + team.losses) > 0 ? team.wins / (team.wins + team.losses) : 0
            })).sort((a, b) => {
                // Sort by win rate descending, then by runs allowed ascending
                if (b.winRate !== a.winRate) {
                    return b.winRate - a.winRate;
                }
                return (a.runs_allowed || 0) - (b.runs_allowed || 0);
            });

            teamsWithRank.forEach((team, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${team.name || ''}</td>
                    <td>${team.wins || 0}-${team.losses || 0}</td>
                    <td>${team.runs_allowed || 0}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Helper function to determine age group and get appropriate CSS class
        function getAgeGroupClass(age) {
            if (!age) return '';

            const ageNum = parseInt(age);
            if (isNaN(ageNum)) return '';

            if (ageNum >= 30 && ageNum <= 39) return 'age-group-30-39';
            if (ageNum >= 40 && ageNum <= 49) return 'age-group-40-49';
            if (ageNum >= 50 && ageNum <= 59) return 'age-group-50-59';
            if (ageNum >= 60 && ageNum <= 67) return 'age-group-60-67';
            if (ageNum >= 68) return 'age-group-68-plus';

            return '';
        }

        // Helper function to get age group label
        function getAgeGroupLabel(age) {
            if (!age) return '';

            const ageNum = parseInt(age);
            if (isNaN(ageNum)) return '';

            if (ageNum >= 30 && ageNum <= 39) return '30-39';
            if (ageNum >= 40 && ageNum <= 49) return '40-49';
            if (ageNum >= 50 && ageNum <= 59) return '50-59';
            if (ageNum >= 60 && ageNum <= 67) return '60-67';
            if (ageNum >= 68) return '68+';

            return '';
        }

        // Helper function to parse time string to minutes since midnight
        function parseTimeToMinutes(timeString) {
            if (!timeString) return 0;

            const match = timeString.match(/^(\d+):(\d+)\s*(AM|PM)$/i);
            if (!match) return 0;

            let hours = parseInt(match[1]);
            const minutes = parseInt(match[2]);
            const ampm = match[3].toUpperCase();

            if (ampm === 'PM' && hours !== 12) hours += 12;
            if (ampm === 'AM' && hours === 12) hours = 0;

            return hours * 60 + minutes;
        }

        // Display players data as cards
        function displayPlayers(players) {
            const playersGrid = document.getElementById('players-grid');
            playersGrid.innerHTML = '';

            if (players.length === 0) {
                const noDataDiv = document.createElement('div');
                noDataDiv.className = 'no-data';
                noDataDiv.textContent = 'No players found in the database.';
                playersGrid.appendChild(noDataDiv);
                return;
            }

            players.forEach(player => {
                // Create player card container
                const playerCard = document.createElement('div');
                playerCard.className = 'player-card';

                // Determine age group and apply appropriate CSS class
                const ageGroupClass = getAgeGroupClass(player.age);
                if (ageGroupClass) {
                    playerCard.classList.add(ageGroupClass);
                }

                // Create player header with name and team
                const playerHeader = document.createElement('div');
                playerHeader.className = 'player-header';

                const playerName = document.createElement('div');
                playerName.className = 'player-name';
                playerName.textContent = `${player.first_name || ''} ${player.last_name || ''}`;

                const playerTeam = document.createElement('div');
                playerTeam.className = 'player-team';
                playerTeam.textContent = player.team_name || 'Unknown Team';

                playerHeader.appendChild(playerName);
                playerHeader.appendChild(playerTeam);

                // Create player details section
                const playerDetails = document.createElement('div');
                playerDetails.className = 'player-details';

                // Add age detail
                if (player.age) {
                    const ageRow = document.createElement('div');
                    ageRow.className = 'player-detail-row';
                    ageRow.textContent = `Age: ${player.age}`;
                    playerDetails.appendChild(ageRow);
                }

                // Add hometown detail
                if (player.hometown) {
                    const hometownRow = document.createElement('div');
                    hometownRow.className = 'player-detail-row';
                    hometownRow.textContent = `${player.hometown}`;
                    playerDetails.appendChild(hometownRow);
                }

                // Add tournaments played badge
                const tournamentsBadge = document.createElement('div');
                if (player.tournaments_played === 1) {
                    tournamentsBadge.className = 'player-tournaments rookie';
                    tournamentsBadge.textContent = 'Rookie';
                } else {
                    tournamentsBadge.className = 'player-tournaments';
                    tournamentsBadge.textContent = `Year ${player.tournaments_played || 0}`;
                }

                // Assemble the player card
                playerCard.appendChild(playerHeader);
                playerCard.appendChild(playerDetails);
                playerCard.appendChild(tournamentsBadge);

                // Add age group badge if age is available
                const ageGroupLabel = getAgeGroupLabel(player.age);
                if (ageGroupLabel) {
                    const ageGroupBadge = document.createElement('div');
                    ageGroupBadge.className = 'age-group-badge';
                    ageGroupBadge.textContent = ageGroupLabel;
                    playerCard.appendChild(ageGroupBadge);
                }

                // Add the completed player card to the grid
                playersGrid.appendChild(playerCard);
            });
        }

        // Display schedule data in calendar view
        function displaySchedule(games) {
            const scheduleContainer = document.getElementById('schedule-container');
            scheduleContainer.innerHTML = '';

            if (games.length === 0) {
                const noDataDiv = document.createElement('div');
                noDataDiv.className = 'no-data';
                noDataDiv.textContent = 'No games found in the database.';
                scheduleContainer.appendChild(noDataDiv);
                return;
            }

            // Group games by day of week
            const gamesByDay = {};
            games.forEach(game => {
                if (!gamesByDay[game.day_of_week]) {
                    gamesByDay[game.day_of_week] = [];
                }
                gamesByDay[game.day_of_week].push(game);
            });

            // Get all unique days from the data and sort them chronologically
            const allDays = Object.keys(gamesByDay);
            const dayOrder = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];

            // Sort days chronologically
            allDays.sort((a, b) => {
                return dayOrder.indexOf(a) - dayOrder.indexOf(b);
            });

            // Sort games within each day by time
            allDays.forEach(day => {
                if (gamesByDay[day]) {
                    gamesByDay[day].sort((a, b) => {
                        return parseTimeToMinutes(a.time) - parseTimeToMinutes(b.time);
                    });
                }
            });

            // Create day sections for all days that have games
            allDays.forEach(day => {
                if (gamesByDay[day] && gamesByDay[day].length > 0) {
                    // Create day section
                    const daySection = document.createElement('div');
                    daySection.className = 'day-section';

                    // Create day header
                    const dayHeader = document.createElement('div');
                    dayHeader.className = 'day-header';
                    const calendarIcon = document.createElement('span');
                    calendarIcon.className = 'calendar-icon';
                    calendarIcon.textContent = 'üìÖ';
                    calendarIcon.setAttribute('aria-hidden', 'true');
                    dayHeader.appendChild(calendarIcon);
                    dayHeader.appendChild(document.createTextNode(day));

                    // Create games grid
                    const gamesGrid = document.createElement('div');
                    gamesGrid.className = 'games-grid';

                    // Add games to grid
                    gamesByDay[day].forEach(game => {
                        const gameCard = document.createElement('div');
                        gameCard.className = 'game-card';

                        // Add time-of-day class based on specific game time
                        const gameMinutes = parseTimeToMinutes(game.time);
                        if (gameMinutes === 570) { // 9:30 AM
                            gameCard.classList.add('game-930am');
                        } else if (gameMinutes === 720) { // 12:00 PM
                            gameCard.classList.add('game-1200pm');
                        } else if (gameMinutes === 810) { // 1:30 PM
                            gameCard.classList.add('game-130pm');
                        } else if (gameMinutes === 870) { // 2:30 PM
                            gameCard.classList.add('game-230pm');
                        } else if (gameMinutes === 960) { // 4:00 PM
                            gameCard.classList.add('game-400pm');
                        } else if (gameMinutes === 1020) { // 5:00 PM
                            gameCard.classList.add('game-500pm');
                        } else if (gameMinutes === 1110) { // 6:30 PM
                            gameCard.classList.add('game-630pm');
                        }

                        const gameTime = document.createElement('div');
                        gameTime.className = 'game-time';
                        gameTime.textContent = game.time;

                        const gameMatchup = document.createElement('div');
                        gameMatchup.className = 'game-matchup';
                        gameMatchup.textContent = `${game.home_team_name} vs ${game.visiting_team_name}`;

                        const gameLocation = document.createElement('div');
                        gameLocation.className = 'game-location';
                        gameLocation.textContent = game.stadium_name;

                        const gameScore = document.createElement('div');
                        gameScore.className = 'game-score';
                        if (game.home_score == null || game.visiting_score == null || game.game_complete === false) {
                            gameScore.textContent = '';
                        } else {
                            gameScore.textContent = `${game.home_score} - ${game.visiting_score}`;
                        }

                        gameCard.appendChild(gameTime);
                        gameCard.appendChild(gameMatchup);
                        gameCard.appendChild(gameLocation);
                        gameCard.appendChild(gameScore);

                        gamesGrid.appendChild(gameCard);
                    });

                    daySection.appendChild(dayHeader);
                    daySection.appendChild(gamesGrid);
                    scheduleContainer.appendChild(daySection);
                }
            });
        }

        // Display games data (kept for backward compatibility)
        function displayGames(games) {
            const tableBody = document.getElementById('games-data');
            if (tableBody) {
                tableBody.innerHTML = '';

                if (games.length === 0) {
                    const row = document.createElement('tr');
                    row.innerHTML = '<td colspan="7" class="no-data">No games found in the database.</td>';
                    tableBody.appendChild(row);
                    return;
                }

                games.forEach(game => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${game.day_of_week || ''}</td>
                        <td>${game.time || ''}</td>
                        <td>${game.stadium_name || ''}</td>
                        <td>${game.home_team_name || ''}</td>
                        <td>${game.visiting_team_name || ''}</td>
                        <td>${game.home_score || ''}</td>
                        <td>${game.visiting_score || ''}</td>
                    `;
                    tableBody.appendChild(row);
                });
            }
        }

        // Global variables to store all data
        let allTeams = [];
        let allPlayers = [];
        let allGames = [];
        let currentTeamFilter = 'all';

        // Function to populate team filter dropdown
        function populateTeamFilter(teams) {
            const teamFilter = document.getElementById('team-filter');
            teamFilter.innerHTML = '<option value="all">All Teams</option>';

            // Add team options
            teams.forEach(team => {
                const option = document.createElement('option');
                option.value = team.name;
                option.textContent = team.name;
                teamFilter.appendChild(option);
            });

            // Add event listener for team filter changes
            teamFilter.addEventListener('change', function() {
                currentTeamFilter = this.value;
                applyTeamFilter();
            });
        }

        // Function to apply team filter to all data
        function applyTeamFilter() {
            if (currentTeamFilter === 'all') {
                // Show all data
                displayTeams(allTeams);
                displayPlayers(allPlayers);
                displaySchedule(allGames);
            } else {
                // Filter teams
                const filteredTeams = allTeams.filter(team => team.name === currentTeamFilter);
                displayTeams(filteredTeams);

                // Filter players
                const filteredPlayers = allPlayers.filter(player => player.team_name === currentTeamFilter);
                displayPlayers(filteredPlayers);

                // Filter games
                const filteredGames = allGames.filter(game =>
                    game.home_team_name === currentTeamFilter || game.visiting_team_name === currentTeamFilter
                );
                displaySchedule(filteredGames);
            }
        }

        // Modified loadDatabaseData function to store all data and populate filter
        async function loadDatabaseData() {
            try {
                // Show loading message
                document.getElementById('loading-container').style.display = 'block';
                document.getElementById('error-container').style.display = 'none';
                document.getElementById('data-container').style.display = 'none';

                // Fetch all data from the three tables
                const [teams, players, games] = await Promise.all([
                    supabaseManager.getTeams(),
                    supabaseManager.getAllPlayers(),
                    supabaseManager.getGames()
                ]);

                // Store all data in global variables
                allTeams = teams;
                allPlayers = players;
                allGames = games;

                // Populate team filter dropdown
                populateTeamFilter(teams);

                // Hide loading message and show data
                document.getElementById('loading-container').style.display = 'none';
                document.getElementById('data-container').style.display = 'block';

                // Display the data
                displayTeams(teams);
                displayPlayers(players);
                displaySchedule(games);

                // Initialize tab functionality
                setupTabs();

            } catch (error) {
                console.error('Error loading database data:', error);

                // Hide loading and show error message only
                document.getElementById('loading-container').style.display = 'none';
                document.getElementById('error-container').style.display = 'block';
                document.getElementById('data-container').style.display = 'none';
            }
        }

        // Start the application
        document.addEventListener('DOMContentLoaded', loadDatabaseData);
    </script>
</body>
</html>
